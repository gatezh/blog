<link rel="stylesheet" href="/css/tailwind.css">

<div class="max-w-2xl mx-auto px-4 py-8">
  <p class="mb-8 text-lg text-gray-700 dark:text-gray-300">Feel free to reach out to me using the form below:</p>

  <form id="contactForm" class="space-y-6">
    <div>
      <label for="name" class="block mb-2 font-medium text-gray-900 dark:text-gray-100">Name *</label>
      <input
        type="text"
        id="name"
        name="name"
        required
        class="w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 dark:hover:border-gray-500 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
        placeholder="Your name"
      >
    </div>

    <div>
      <label for="email" class="block mb-2 font-medium text-gray-900 dark:text-gray-100">Email *</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 dark:hover:border-gray-500 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
        placeholder="your.email@example.com"
      >
    </div>

    <div>
      <label for="subject" class="block mb-2 font-medium text-gray-900 dark:text-gray-100">Subject *</label>
      <input
        type="text"
        id="subject"
        name="subject"
        required
        class="w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 dark:hover:border-gray-500 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
        placeholder="What is this about?"
      >
    </div>

    <div>
      <label for="message" class="block mb-2 font-medium text-gray-900 dark:text-gray-100">Message *</label>
      <textarea
        id="message"
        name="message"
        required
        class="w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 dark:hover:border-gray-500 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 min-h-[150px] resize-y"
        placeholder="Your message..."
      ></textarea>
    </div>

    <button type="submit" class="w-full px-6 py-3 rounded-lg font-semibold text-lg transition-all duration-200 bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 shadow-md hover:shadow-lg" id="submitBtn">
      Send Message
    </button>

    <div
      id="formMessage"
      class="hidden mt-4 p-4 rounded-lg"
      role="alert"
    ></div>
  </form>
</div>

<script>
const WORKER_URL = 'https://contact.gatezh.com'; // Update this with your worker URL after deployment

document.getElementById('contactForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const submitBtn = document.getElementById('submitBtn');
  const formMessage = document.getElementById('formMessage');
  const form = e.target;

  // Disable submit button
  submitBtn.disabled = true;
  submitBtn.textContent = 'Sending...';

  // Hide previous messages
  formMessage.className = 'hidden mt-4 p-4 rounded-lg';

  const formData = {
    name: form.name.value.trim(),
    email: form.email.value.trim(),
    subject: form.subject.value.trim(),
    message: form.message.value.trim()
  };

  try {
    const response = await fetch(WORKER_URL, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    });

    const data = await response.json();

    if (response.ok) {
      formMessage.textContent = 'Thank you! Your message has been sent successfully.';
      formMessage.className = 'block mt-4 p-4 rounded-lg bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100 border border-green-200 dark:border-green-800';
      form.reset();
    } else {
      throw new Error(data.error || 'Failed to send message');
    }
  } catch (error) {
    formMessage.textContent = 'Sorry, there was an error sending your message. Please try again later.';
    formMessage.className = 'block mt-4 p-4 rounded-lg bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-100 border border-red-200 dark:border-red-800';
    console.error('Form submission error:', error);
  } finally {
    submitBtn.disabled = false;
    submitBtn.textContent = 'Send Message';
  }
});
</script>
