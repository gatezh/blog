// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/marcosgomesneto/bun-devcontainers/tree/main/src/basic-bun
{
  "name": "Hugo Dev",
  // ⚠️ Keep the same hugo version as in .github/workflows/deploy-web.yml
  "image": "ghcr.io/gatezh/devcontainer-hugo-bun:hugo0.152.2-bun1.3.2-alpine",
  // Keep node_modules out of a host machine
  "mounts": [
    "source=${localWorkspaceFolderBasename}-root-node_modules,target=${containerWorkspaceFolder}/node_modules,type=volume",
    "source=${localWorkspaceFolderBasename}-web-node_modules,target=${containerWorkspaceFolder}/apps/web/node_modules,type=volume",
    "source=${localWorkspaceFolderBasename}-worker-node_modules,target=${containerWorkspaceFolder}/apps/email-worker/node_modules,type=volume"
  ],
  "runArgs": [
    "--hostname=gatezh-com"
  ],
  // Configure tool-specific properties.
  "customizations": {
    // Configure properties specific to VS Code.
    "vscode": {
      // Use zsh as the default shell for better VS Code integration
      "settings": {
        "terminal.integrated.defaultProfile.linux": "zsh",
        // Suppress extension recommendation prompts (e.g., Container Tools in Codespaces)
        "extensions.ignoreRecommendations": true
      },
      // Add the IDs of extensions you want installed when the container is created.
      "extensions": [
        // **Bun**
        "oven.bun-vscode",
        // Prettier - Code Formatter
        "esbenp.prettier-vscode",
        // **Tailwind**
        // Tailwind CSS IntelliSense
        "bradlc.vscode-tailwindcss",
        // Tailwind Fold
        "stivo.tailwind-fold",
        // **Hugo**
        // Hugofy - Hugo-related extension
        "akmittal.hugofy",
        // Language Hugo VSCode - Hugo language support
        "budparr.language-hugo-vscode",
        // Hugo Shortcode Syntax - Hugo shortcode syntax
        "kaellarkin.hugo-shortcode-syntax"
      ]
    }
  },
  // Run bun install after container creation
  "postCreateCommand": "bun install"
}
